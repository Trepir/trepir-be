
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id String @id @default(cuid())
  createdAt DateTime @default(now())
  firstName String
  lastName String
  displayName String
  email String @unique
  uid String
  photoUrl String
  trips Trip[]
  favoriteActivities FavoriteActivity[]
  activities Activity[]


}

model Trip {
  id String @id @default(cuid())
  createdAt DateTime @default(now())
  userId String 
  startDate DateTime
  endDate DateTime
  name String
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
  favouriteActivities FavoriteActivity[]
  tripActivities TripActivity[]
  acomodations Acomodation[]
  travelEvents TravelEvent[]
}

model TripActivity {
  id String @id @default(cuid())
  createdAt DateTime @default(now())
  activityId String
  tripId String
  day String
  trip Trip @relation(fields:[tripId], references: [id], onDelete: Cascade)
}

model FavoriteActivity {
  id String @id @default(cuid())
  createdAt DateTime @default(now())
  activityId String
  userId String
  tripId String?
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
  activity Activity @relation(fields: [activityId], references: [id], onDelete: Cascade)
  trip Trip? @relation(fields:[tripId], references: [id], onDelete: Cascade)

}

model Acomodation {
  id String @id @default(cuid())
  createdAt DateTime @default(now())
  locationId String @unique
  startDate DateTime
  endDate DateTime
  tripId String
  trip Trip @relation(fields:[tripId], references: [id], onDelete: Cascade)
  location Location @relation(fields:[locationId], references: [id], onDelete: Cascade)
}
model Location {
  id String @id @default(cuid())
  createdAt DateTime @default(now())
  latitude Float
  longitude Float
  country String
  state String
  locationName String
  city String
  googleId String?
  activity Activity[]
  acomodation Acomodation?
}

model TravelEvent {
  id String @id @default(cuid())
  createdAt DateTime @default(now())
  type Int
  departure DateTime
  arrival DateTime
  origin String
  destination String
  tripId String
  trip Trip @relation(fields:[tripId], references: [id], onDelete: Cascade)
}

model Activity {
  id String @id @default(cuid())
  createdAt DateTime @default(now())
  name String
  duration Float
  description String
  time DateTime?
  rating Int?
  locationId String
  location Location @relation(fields: [locationId], references: [id], onDelete: Cascade)
  tags ActivityTag[]
  creatorId String
  creator User @relation(fields: [creatorId], references: [id], onDelete: Cascade)
  favoriteActivities FavoriteActivity[]

}


model ActivityTag {
  id String @id @default(cuid())
  activityId String
  tagId String
  activity Activity @relation(fields: [activityId], references: [id], onDelete: Cascade)
  tag Tag @relation(fields: [tagId], references: [id], onDelete: Cascade)
}
model Tag {
  id String @id @default(cuid())
  tag String
  activities ActivityTag[]
}





